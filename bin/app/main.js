"use strict";L.CanvasOverlay=L.Class.extend({initialize:function(t,a){this._userDrawFunc=t,L.setOptions(this,a)},drawing:function(t){return this._userDrawFunc=t,this},params:function(t){return L.setOptions(this,t),this},canvas:function(){return this._canvas},redraw:function(){return this._frame||(this._frame=L.Util.requestAnimFrame(this._redraw,this)),this},onAdd:function(t){this._map=t,this._canvas=L.DomUtil.create("canvas","leaflet-heatmap-layer");var a=this._map.getSize();this._canvas.width=a.x,this._canvas.height=a.y;var i=this._map.options.zoomAnimation&&L.Browser.any3d;L.DomUtil.addClass(this._canvas,"leaflet-zoom-"+(i?"animated":"hide")),t._panes.overlayPane.appendChild(this._canvas),t.on("moveend",this._reset,this),t.on("resize",this._resize,this),t.options.zoomAnimation&&L.Browser.any3d&&t.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(t){t.getPanes().overlayPane.removeChild(this._canvas),t.off("moveend",this._reset,this),t.off("resize",this._resize,this),t.options.zoomAnimation&&t.off("zoomanim",this._animateZoom,this),this_canvas=null},addTo:function(t){return t.addLayer(this),this},_resize:function(t){this._canvas.width=t.newSize.x,this._canvas.height=t.newSize.y},_reset:function(){var t=this._map.containerPointToLayerPoint([0,0]);L.DomUtil.setPosition(this._canvas,t),this._redraw()},_redraw:function(){var t=this._map.getSize(),a=this._map.getBounds(),i=180*t.x/(20037508.34*(a.getEast()-a.getWest())),e=this._map.getZoom();this._userDrawFunc&&this._userDrawFunc(this,{canvas:this._canvas,bounds:a,size:t,zoomScale:i,zoom:e,options:this.options}),this._frame=null},_animateZoom:function(t){var a=this._map.getZoomScale(t.zoom),i=this._map._getCenterOffset(t.center)._multiplyBy(-a).subtract(this._map._getMapPanePos());this._canvas.style[L.DomUtil.TRANSFORM]=L.DomUtil.getTranslateString(i)+" scale("+a+")"}}),L.canvasOverlay=function(t,a){return new L.CanvasOverlay(t,a)},$(function(){var i=L.map("map").setView([55.751244,37.618423],9);L.tileLayer("https://{s}.basemaps.cartocdn.com/rastertiles/voyager_labels_under/{z}/{x}/{y}.png").addTo(i),$.get("bin/data/places.json",function(t){!function(a){L.canvasOverlay().drawing(function(e,t){var n=t.canvas.getContext("2d");n.clearRect(0,0,t.canvas.width,t.canvas.height),n.fillStyle="rgba(255,116,0, 0.8)",n.globalAlpha=.2,$.each(a,function(t,a){var i=e._map.latLngToContainerPoint([a.point[1],a.point[0]]);n.beginPath(),n.arc(i.x,i.y,3,0,2*Math.PI),n.fill(),n.closePath()})}).addTo(i)}(t)})});
//# sourceMappingURL=main.js.map
